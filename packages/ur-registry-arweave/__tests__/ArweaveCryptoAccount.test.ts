// @ts-nocheck

import { ArweaveCryptoAccount } from "../src";

describe("arwave-crypto-account", () => {
  it("test should generate arweave-crypto-account", () => {
    const keyData = Buffer.from(
      "c41a50ed2155a5740b45df8e3815774d6b8d193e5ad80c9efaaf6d6d0253f350c85becf39eb7056d75841f6a064acf8381383eceb218e16859ef72be7273321a2b4855b87bc6f14c734e2a9c90850c34a8a0a4279ac9be3186b086db5b302fb68176b4c1fee337456c42f972c7993f618fdedc0bf1658c2d59cf2c0c6ac31a61ac1260e0fd4a761ca3707e27611c14b4c6b6abe698c11009ddf5d1511ae47ea271079b6892d229a27d0822e0c7aa12a4cf7f7c28fe23d201eae2adb7f403c9c5a1762c2d8cc96898ce41fe529ab0ef8184e50063e6fc62e0a808e8602254c142c9e7f7e94e6ef2c767ac0e99810d09a44bfde8db46298bc0e25b4a333b4ef86cd7ce658ff661ab0d1789b603b8770a6b433851a91c8ff07a7a8a0767702f6887098ea34bf4a8309eaab9baadd16d45cdd9b1899b6a303a2dce23745cec9fc2ecd9735a66c77fdea1bfd4cdb2be7bfb407a4fd5d3405c3cb33b5316e16559f0c4bf0bc7d1a3ada78917217b289c4d75eb60e0396f03035fd8d553727c790189cfd8dabcee8a4ae6607925b9a27ff7ad7ede26b98f8acd2532cf3175693f3eede9989a0aeedbdb3ff14fec823017531aead4cd22733ab30dbce76cebcdac64424128d6eeff3cdc1825d7cdb7113e74db126e6d931544467c6979aa8d50ac803f36084ed7077f34acfcf3f77bb13d5ebb723fc5d3f45212d2dd6ef20ea757fb4c95",
      "hex"
    );
    const xfp = Buffer.from("e9181cf3", "hex");

    const arweaveCryptoAccount = new ArweaveCryptoAccount(
      xfp,
      keyData,
      "keystone"
    );
    const hex = arweaveCryptoAccount.toCBOR().toString("hex");
    expect(hex).toBe(
      "a3011ae9181cf302590200c41a50ed2155a5740b45df8e3815774d6b8d193e5ad80c9efaaf6d6d0253f350c85becf39eb7056d75841f6a064acf8381383eceb218e16859ef72be7273321a2b4855b87bc6f14c734e2a9c90850c34a8a0a4279ac9be3186b086db5b302fb68176b4c1fee337456c42f972c7993f618fdedc0bf1658c2d59cf2c0c6ac31a61ac1260e0fd4a761ca3707e27611c14b4c6b6abe698c11009ddf5d1511ae47ea271079b6892d229a27d0822e0c7aa12a4cf7f7c28fe23d201eae2adb7f403c9c5a1762c2d8cc96898ce41fe529ab0ef8184e50063e6fc62e0a808e8602254c142c9e7f7e94e6ef2c767ac0e99810d09a44bfde8db46298bc0e25b4a333b4ef86cd7ce658ff661ab0d1789b603b8770a6b433851a91c8ff07a7a8a0767702f6887098ea34bf4a8309eaab9baadd16d45cdd9b1899b6a303a2dce23745cec9fc2ecd9735a66c77fdea1bfd4cdb2be7bfb407a4fd5d3405c3cb33b5316e16559f0c4bf0bc7d1a3ada78917217b289c4d75eb60e0396f03035fd8d553727c790189cfd8dabcee8a4ae6607925b9a27ff7ad7ede26b98f8acd2532cf3175693f3eede9989a0aeedbdb3ff14fec823017531aead4cd22733ab30dbce76cebcdac64424128d6eeff3cdc1825d7cdb7113e74db126e6d931544467c6979aa8d50ac803f36084ed7077f34acfcf3f77bb13d5ebb723fc5d3f45212d2dd6ef20ea757fb4c9503686b657973746f6e65"
    );
    const ur = arweaveCryptoAccount.toUREncoder(1000).nextPart();
    expect(ur).toBe(
      "ur:arweave-crypto-account/otadcywlcscewfaohkaoaesscygdweclgoonjybdfeurmnetbzktgtjelgcffmhttpbnnnzspejnjnaoguwfgdsphpwpwfnnrlahjnkplrctimamgetklslyetfmtoprcsvyishkwsjprnjpjkeycydnfdgorokgswwngsjkgldrnsmhlpbneepdnboxdinysornehlnpflnuyhpdydlrplykoqzsezevlemfejzfwytjpstnlfhhsmyueuobdwnihlkdphktkdwbnimsrcyhspsbghnvtzcgekoceotjokbdihscebbqzswrppyvamksebeasutykttgycyvekboejsatndismotddtoekiaycpvtstpkbgoxtklbkedezecntdadwdvopmrlwkaxsoskoykodwdplksoismktofpzegmnypfwslylrvwaeiavaztidvtpdayvshncpghsefwsovdylwlgljtwzstiopsbanllybtasoxgrzcvsuyfgdtlurtvohpgeeofrglyajztstoihmyynhspybtchldrpaxroktbkjefxetgyptcemywtknknleatiojodlisltasmnotgrwkpddynnpkrhrdpmttjnfesntapaldndimdyftdptocnjyhhwpnesawptajkhtiystlbueoyrstysnprrnkgzofzkngwtltefzhhfnqdfrgucmvyihhkwtssrsbdstttotpmosldchclkgdensgtkpwmhnvtesjlaxaxhetptlgujpkekkadldtktptnrfwylegevahnkkdarhoelbylpmkbuedsrhmylesndaeytkehkpinfhfmwewlmknybkwyuyuyfhwngwwplfdychgucywdtysncpjkftqdbtrfvdjzwmsnpsiefwfpdetbwyzmfnuocsdatssnrlbyfmjyuybgjtjnmubzfyfgkeinkkpklggdpslafhenaygltsatlbeepsztwfylkgpafshyrkjpfhsktewkgmbgtdutjtwzbaoshgzogsmdaxisjeihkkjkjyjljtihpelpoylg"
    );
  });
  it("test should decode arweave-crypto-account", () => {
    const arweaveCryptoAccount = ArweaveCryptoAccount.fromCBOR(
      Buffer.from(
        "a3011ae9181cf302590200c41a50ed2155a5740b45df8e3815774d6b8d193e5ad80c9efaaf6d6d0253f350c85becf39eb7056d75841f6a064acf8381383eceb218e16859ef72be7273321a2b4855b87bc6f14c734e2a9c90850c34a8a0a4279ac9be3186b086db5b302fb68176b4c1fee337456c42f972c7993f618fdedc0bf1658c2d59cf2c0c6ac31a61ac1260e0fd4a761ca3707e27611c14b4c6b6abe698c11009ddf5d1511ae47ea271079b6892d229a27d0822e0c7aa12a4cf7f7c28fe23d201eae2adb7f403c9c5a1762c2d8cc96898ce41fe529ab0ef8184e50063e6fc62e0a808e8602254c142c9e7f7e94e6ef2c767ac0e99810d09a44bfde8db46298bc0e25b4a333b4ef86cd7ce658ff661ab0d1789b603b8770a6b433851a91c8ff07a7a8a0767702f6887098ea34bf4a8309eaab9baadd16d45cdd9b1899b6a303a2dce23745cec9fc2ecd9735a66c77fdea1bfd4cdb2be7bfb407a4fd5d3405c3cb33b5316e16559f0c4bf0bc7d1a3ada78917217b289c4d75eb60e0396f03035fd8d553727c790189cfd8dabcee8a4ae6607925b9a27ff7ad7ede26b98f8acd2532cf3175693f3eede9989a0aeedbdb3ff14fec823017531aead4cd22733ab30dbce76cebcdac64424128d6eeff3cdc1825d7cdb7113e74db126e6d931544467c6979aa8d50ac803f36084ed7077f34acfcf3f77bb13d5ebb723fc5d3f45212d2dd6ef20ea757fb4c9503686b657973746f6e65",
        "hex"
      )
    );
    expect(arweaveCryptoAccount.getMasterFingerprint().toString("hex")).toBe(
      "e9181cf3"
    );
    expect(arweaveCryptoAccount.getKeyData().toString("hex")).toEqual(
      "c41a50ed2155a5740b45df8e3815774d6b8d193e5ad80c9efaaf6d6d0253f350c85becf39eb7056d75841f6a064acf8381383eceb218e16859ef72be7273321a2b4855b87bc6f14c734e2a9c90850c34a8a0a4279ac9be3186b086db5b302fb68176b4c1fee337456c42f972c7993f618fdedc0bf1658c2d59cf2c0c6ac31a61ac1260e0fd4a761ca3707e27611c14b4c6b6abe698c11009ddf5d1511ae47ea271079b6892d229a27d0822e0c7aa12a4cf7f7c28fe23d201eae2adb7f403c9c5a1762c2d8cc96898ce41fe529ab0ef8184e50063e6fc62e0a808e8602254c142c9e7f7e94e6ef2c767ac0e99810d09a44bfde8db46298bc0e25b4a333b4ef86cd7ce658ff661ab0d1789b603b8770a6b433851a91c8ff07a7a8a0767702f6887098ea34bf4a8309eaab9baadd16d45cdd9b1899b6a303a2dce23745cec9fc2ecd9735a66c77fdea1bfd4cdb2be7bfb407a4fd5d3405c3cb33b5316e16559f0c4bf0bc7d1a3ada78917217b289c4d75eb60e0396f03035fd8d553727c790189cfd8dabcee8a4ae6607925b9a27ff7ad7ede26b98f8acd2532cf3175693f3eede9989a0aeedbdb3ff14fec823017531aead4cd22733ab30dbce76cebcdac64424128d6eeff3cdc1825d7cdb7113e74db126e6d931544467c6979aa8d50ac803f36084ed7077f34acfcf3f77bb13d5ebb723fc5d3f45212d2dd6ef20ea757fb4c95"
    );
    expect(arweaveCryptoAccount.getDevice()).toBe("keystone");
  });
});
